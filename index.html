<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개혁신앙의 기초: 신앙, 삶, 그리고 예배</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f0f2f5;
        }
        .infographic-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            margin-bottom: 2rem;
            overflow: hidden;
            border-left-width: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        .icon-bg {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .icon-bg svg {
            width: 32px;
            height: 32px;
        }
        .ask-question-btn {
            background-color: #4f46e5;
            color: white;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
            margin-top: 1.5rem;
            cursor: pointer;
        }
        .ask-question-btn:hover {
            background-color: #4338ca;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        .modal-container {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.active .modal-container {
            transform: scale(1);
        }
        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            flex-grow: 1;
        }
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #e5e7eb;
        }
        .chat-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 12px;
            max-width: 85%;
            word-wrap: break-word;
        }
        .user-bubble {
            background-color: #eef2ff;
            color: #4338ca;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }
        .ai-bubble {
            background-color: #f3f4f6;
            color: #1f2937;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #9ca3af;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        th, td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            text-align: left;
        }
        th {
            background-color: #f9fafb;
            font-weight: 600;
        }
        blockquote {
            border-left: 4px solid #d1d5db;
            padding-left: 1rem;
            margin-left: 0;
            font-style: italic;
            color: #4b5563;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-10">
    <main class="max-w-4xl mx-auto">
        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-800 mb-3">개혁신앙의 기초: 신앙, 삶, 그리고 예배</h1>
            <p class="text-lg sm:text-xl text-gray-600">성경적 세계관, 고백적 신앙, 그리고 하나님 중심의 삶에 대한 깊이 있는 탐구</p>
        </header>

        <section id="chapter1" class="infographic-card" style="border-color: #3b82f6;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #dbeafe;">
                    <svg style="color: #3b82f6;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 1장: 뿌리 - 우리의 역사</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>개혁주의 교회는 갑자기 등장한 것이 아니라, 깊은 역사적 뿌리를 가지고 있습니다. 역사를 아는 것은 현재 우리의 신앙 정체성을 이해하는 데 필수적입니다.</p>
                        <blockquote>"과거를 기억하지 못하는 자는 그 과거를 되풀이할 수밖에 없다." - 조지 산타야나</blockquote>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">개혁신앙의 역사적 정체성</h3>
                        <p>개혁주의 교회는 스스로를 다음 세 가지 정체성의 연속선상에서 이해합니다.</p>
                        <ol class="list-decimal list-inside space-y-2 pl-4">
                            <li><strong>기독교(Christian):</strong> 우리는 사도 시대 이후 약 500년간의 초대 교회의 신앙을 계승합니다. 성경을 하나님의 말씀으로 믿으며 삼위일체, 그리스도의 신성과 인성 등 기독교의 핵심 교리를 고백합니다. 이를 위해 우리는 모든 교회가 보편적으로 받아들이는 고대 신조들을 신앙의 기준으로 삼습니다.
                                <ul class="list-disc list-inside space-y-1 pl-6 mt-2">
                                    <li><strong>사도신경 (Apostles' Creed):</strong> 삼위일체 구조에 따라 성부, 성자, 성령의 사역을 요약하는 가장 기본적인 신앙고백입니다.</li>
                                    <li><strong>니케아-콘스탄티노플 신경 (Nicene-Constantinopolitan Creed):</strong> 그리스도의 완전한 신성과 성령의 완전한 신성을 확립한 공의회의 신앙고백입니다.</li>
                                    <li><strong>아타나시우스 신경 (Athanasian Creed):</strong> 삼위일체와 그리스도의 양성(신성과 인성) 교리를 매우 정교하게 설명합니다.</li>
                                    <li><strong>칼케돈 정의 (Definition of Chalcedon):</strong> 그리스도께서 두 본성(신성, 인성)을 가지시되, 혼합되거나, 변하거나, 나뉘거나, 분리되지 않는 한 인격이심을 정의합니다.</li>
                                </ul>
                            </li>
                            <li><strong>개신교(Protestant):</strong> 우리는 16세기 종교개혁의 후예입니다. 로마 가톨릭 교회의 교황 중심주의와 행위 구원을 거부하고, 오직 그리스도만이 교회의 머리이시며, 오직 성경만이 신앙과 삶의 유일한 권위이고(Sola Scriptura), 오직 은혜와 믿음으로만 구원받음(Sola Gratia, Sola Fide)을 선포합니다.</li>
                            <li><strong>개혁주의(Reformed):</strong> 우리는 개신교 내에서도 성경의 가르침에 따라 교회를 "항상 개혁"하고자 하는 전통에 서 있습니다. 이는 단순히 루터나 칼빈과 같은 특정 인물을 따르는 것을 넘어, 하나님의 주권적인 은혜를 모든 신학의 중심에 두는 것을 의미합니다.</li>
                        </ol>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter2" class="infographic-card" style="border-color: #8b5cf6;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #ede9fe;">
                     <svg style="color: #8b5cf6;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 2장: 신앙고백 - 교리의 기초</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>개혁주의 교회는 "성경만 믿는다"고 말하는 것만으로는 충분하지 않다고 믿습니다. 중요한 것은 "성경이 무엇을 가르친다고 믿는가"입니다. 신앙고백서는 성경의 핵심 교리를 체계적으로 요약하여, 교회가 무엇을 믿고 가르치는지를 명확하게 공적으로 선언하는 문서입니다.</p>

                        <h3 class="text-lg font-semibold mt-6 mb-2">신앙고백의 성경적 근거와 유익</h3>
                        <p>신앙고백은 성경적인 전통입니다. 구약의 이스라엘은 "쉐마"(신 6:4)를 고백했고, 신약의 성도들은 "예수는 그리스도시요 살아계신 하나님의 아들이십니다"(마 16:16)와 같은 신앙을 고백했습니다. 신앙고백서는 다음과 같은 유익을 제공합니다.</p>
                        <ul class="list-disc list-inside space-y-2 pl-4">
                            <li><strong>교회의 통일성:</strong> 하나의 목소리로(롬 15:6) 신앙을 고백하며 교회를 하나로 묶어줍니다.</li>
                            <li><strong>진리의 표준:</strong> 거짓 가르침으로부터 교회를 보호하고 "건전한 말씀의 본"(딤후 1:13)을 제시합니다.</li>
                            <li><strong>교회 권징의 기준:</strong> 가르침을 평가하고 성도를 보호하는 객관적인 기준이 됩니다.</li>
                            <li><strong>증언과 교육의 도구:</strong> 세상에 교회의 믿음을 명확히 증언하고, 다음 세대를 교육하는 중요한 도구가 됩니다.</li>
                        </ul>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">주요 개혁주의 신앙고백서</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>대륙 개혁주의 (Three Forms of Unity)</th>
                                    <th>영국/스코틀랜드 장로교 (Westminster Standards)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>벨직 신앙고백서 (1561):</strong> 박해받던 네덜란드 개혁교회가 자신들의 신앙이 성경적이며 역사적 기독교임을 변증하기 위해 작성했습니다.</td>
                                    <td><strong>웨스트민스터 신앙고백서 (1647):</strong> 영국 교회의 신앙을 통일하기 위해 소집된 웨스트민스터 총회에서 작성된 가장 체계적인 신앙고백서입니다.</td>
                                </tr>
                                <tr>
                                    <td><strong>하이델베르크 요리문답 (1563):</strong> '죄, 구원, 감사'라는 세 부분으로 구성되어, 기독교 교리를 신자의 '유일한 위로'라는 관점에서 따뜻하게 설명합니다.</td>
                                    <td><strong>웨스트민스터 대요리문답 (1648):</strong> 신앙고백서의 내용을 더 상세하고 깊이 있게 다루며, 주로 목회자들이 설교 준비에 사용했습니다.</td>
                                </tr>
                                <tr>
                                    <td><strong>도르트 신조 (1618-19):</strong> 알미니우스주의의 가르침에 반박하여 하나님의 주권적인 은혜 교리(TULIP)를 명확하게 변호합니다.</td>
                                    <td><strong>웨스트민스터 소요리문답 (1648):</strong> "사람의 제일 되는 목적은 무엇입니까?"라는 질문으로 시작하며, 자녀와 초신자를 위해 핵심 교리를 간결하게 가르칩니다.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter3" class="infographic-card" style="border-color: #ef4444;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #fee2e2;">
                    <svg style="color: #ef4444;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 3장: 성경 - 최종 권위</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>종교개혁의 핵심 원리인 '오직 성경'(Sola Scriptura)은 성경이 교회와 신자의 신앙과 삶에 있어 유일하고 최종적인 권위임을 의미합니다. 교회나 전통이 성경을 낳은 것이 아니라, 성경이 교회를 낳습니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">성경의 속성</h3>
                        <ul class="list-disc list-inside space-y-2 pl-4">
                            <li><strong>계시 (Revelation):</strong> 성경은 하나님께서 자신을 인격적으로 드러내신 특별한 방식입니다. 창조 세계를 통해 하나님을 어렴풋이 알 수 있지만, 오직 성경을 통해서만 구원에 필요한 지식을 명확하고 완전하게 얻을 수 있습니다.</li>
                            <li><strong>영감 (Inspiration):</strong> 성경은 성령께서 인간 저자들을 사용하여 오류 없이 하나님의 말씀을 기록하게 하신 결과물입니다. 성경의 모든 말씀은 하나님께서 직접 "숨을 내쉬신"(딤후 3:16) 것입니다.</li>
                            <li><strong>정경성 (Canonicity):</strong> 구약 39권과 신약 27권, 총 66권의 책만이 교회의 유일한 규범이자 표준("캐논")입니다. 외경은 영감된 책이 아니므로 권위가 없습니다.</li>
                            <li><strong>권위 (Authority):</strong> 성경의 권위는 교회의 인정이나 인간의 판단에서 오는 것이 아니라, 하나님 자신에게서 나옵니다. 성령의 내적 증거를 통해 우리는 성경이 하나님의 말씀임을 확신하게 됩니다.</li>
                            <li><strong>충분성 (Sufficiency):</strong> 성경은 우리의 구원과 하나님을 예배하며 살아가는 데 필요한 모든 것을 온전히 담고 있습니다. 그러므로 성경에 무엇을 더하거나 뺄 수 없습니다(신 4:2, 계 22:18-19).</li>
                            <li><strong>명료성 (Perspicuity):</strong> 성경의 모든 부분이 똑같이 쉽게 이해되는 것은 아니지만, 구원에 필요한 핵심 진리들은 배우지 못한 사람이라도 "일상적인 수단"(읽기, 기도, 묵상)을 통해 충분히 이해할 수 있도록 명확하게 제시되어 있습니다.</li>
                        </ul>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter4" class="infographic-card" style="border-color: #eab308;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #fef9c3;">
                    <svg style="color: #eab308;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 4장: 언약 - 하나님의 이야기</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>개혁신학은 성경 전체를 하나님의 '언약'이라는 통일된 관점으로 이해합니다. 언약은 두 당사자 간의 엄숙한 관계 맺음이며, 성경은 하나님께서 인류와 맺으신 언약들의 이야기입니다.</p>

                        <h3 class="text-lg font-semibold mt-6 mb-2">성경의 언약 드라마: 4막 구조</h3>
                        <p><strong>1막: 창조와 행위 언약</strong><br>
                        하나님은 첫 사람 아담을 자신의 형상으로 창조하시고 그와 <strong>행위 언약(Covenant of Works)</strong>을 맺으셨습니다. 이 언약은 아담이 하나님의 명령에 완전히 순종하는 조건으로 영원한 생명을 약속했습니다. 선악과는 이 언약의 순종 여부를 시험하는 표였습니다.</p>

                        <p><strong>2막: 타락과 반역</strong><br>
                        아담은 인류의 대표로서 하나님의 명령을 불순종하고 언약을 파기했습니다. 그 결과, 모든 인류는 원죄 아래 태어나 하나님과의 관계가 단절되고 죽음의 저주 아래 놓이게 되었습니다.</p>

                        <p><strong>3막: 구속과 은혜 언약</strong><br>
                        타락 직후, 하나님은 여자의 후손을 통해 구원을 약속하시며(창 3:15) <strong>은혜 언약(Covenant of Grace)</strong>을 시작하셨습니다. 이 언약은 행위가 아닌 오직 하나님의 은혜로, 그리스도를 믿는 믿음을 통해 죄인들을 구원하는 단일한 약속입니다. 이 은혜 언약은 구약 시대에 노아, 아브라함, 모세, 다윗 언약 등을 통해 점진적으로 계시되었고, 마침내 예수 그리스도의 피로 맺어진 새 언약에서 완성되었습니다.</p>
                        
                        <p><strong>배후의 구속 언약:</strong> 역사 속 은혜 언약의 배후에는, 창세 전 성부, 성자, 성령 삼위 하나님께서 타락할 인류 가운데 택한 백성을 구원하시기로 맺으신 <strong>구속 언약(Covenant of Redemption)</strong>이 있습니다. 성부께서는 구원할 백성을 택하여 성자께 주시고, 성자께서는 그들의 구속을 위해 자신을 내어주시며, 성령께서는 그 구원을 각 개인에게 적용하시기로 영원 전에 약속하셨습니다.</p>

                        <p><strong>4막: 완성</strong><br>
                        역사의 마지막에 그리스도께서 다시 오셔서 죽은 자를 부활시키고, 세상을 심판하시며, 모든 피조세계를 새롭게 하실 것입니다. 그때 하나님의 백성은 새 하늘과 새 땅에서 영원히 하나님과 함께하며 그분의 언약적 사랑을 온전히 누리게 될 것입니다.</p>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter5" class="infographic-card" style="border-color: #22c55e;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #dcfce7;">
                    <svg style="color: #22c55e;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 5장: 칭의 - 오직 은혜, 믿음, 그리스도</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>종교개혁의 핵심 교리인 칭의는 "죄인이 어떻게 거룩하신 하나님 앞에서 의롭다 인정받을 수 있는가?"라는 근본적인 질문에 대한 성경의 답변입니다.</p>

                        <h3 class="text-lg font-semibold mt-6 mb-2">법정적 선언으로서의 칭의</h3>
                        <p>칭의(Justification)는 죄인의 상태가 도덕적으로 변화되는 과정이 아니라, 하나님께서 법정에서 내리시는 <strong>선언</strong>입니다. 하나님께서는 죄인임에도 불구하고, 그리스도를 믿는 자에게 "너는 의롭다"고 선포하십니다. 이는 다음과 같은 세 가지 '오직'(Sola) 원리에 근거합니다.</p>
                        
                        <div class="grid md:grid-cols-3 gap-4 mt-4">
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">오직 은혜로 (Sola Gratia)</h4>
                                <p>우리의 구원은 전적인 하나님의 선물입니다. 우리는 죄로 인해 전적으로 부패하여 스스로를 구원할 수 없으며, 어떠한 공로나 자격도 내세울 수 없습니다. 구원은 우리의 행위가 아닌, 값없이 주시는 하나님의 "자유로운 은혜"(WLC 70)의 행위입니다.</p>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">오직 믿음으로 (Sola Fide)</h4>
                                <p>하나님의 은혜는 '오직 믿음'이라는 통로를 통해 받습니다. 여기서 믿음은 구원을 얻기 위한 우리의 '행위'나 공로가 아닙니다. 믿음은 그리스도와 그분의 의를 받아들이고 의지하는 '도구'일 뿐입니다. 심지어 이 믿음조차도 성령께서 주시는 하나님의 선물입니다.</p>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">오직 그리스도로 (Solus Christus)</h4>
                                <p>우리가 의롭다 칭함 받는 유일한 근거는 <strong>그리스도의 완전한 순종과 대속적인 죽음</strong>입니다. 그리스도께서는 율법을 완벽하게 지키셨고(적극적 순종), 우리의 죄 값을 십자가에서 모두 치르셨습니다(소극적 순종). 이 그리스도의 완전한 의(義)가 믿는 자에게 <strong>전가(Imputation)</strong>됩니다. 즉, 하나님께서 그리스도의 의를 우리의 것으로 간주하시고, 우리의 죄를 그리스도의 것으로 간주하십니다.</p>
                            </div>
                        </div>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter6" class="infographic-card" style="border-color: #0ea5e9;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #e0f2fe;">
                    <svg style="color: #0ea5e9;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 6장: 성화 - 그리스도인의 삶</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>칭의가 우리의 법적 신분을 바꾸는 단회적 사건이라면, 성화(Sanctification)는 성령께서 우리를 점진적으로 그리스도의 형상으로 닮아가게 하시는 평생의 과정입니다. 좋은 행위는 구원의 조건이 아니라, 구원받은 자의 감사와 순종의 열매입니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">감사로 드리는 새로운 삶</h3>
                        <p>성화의 동기는 율법적 의무감이나 죄책감이 아니라, 구원의 은혜에 대한 <strong>감사</strong>입니다. 하이델베르크 요리문답은 기독교인의 삶 전체를 '감사'의 영역으로 설명합니다. 우리는 그리스도께서 피로 우리를 구속하셨을 뿐만 아니라, 성령으로 우리를 새롭게 하셨기 때문에 선한 일을 해야 합니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">성화의 두 가지 측면: 죽음과 살아남</h3>
                        <p>성화는 옛사람의 죽음과 새사람의 살아남이라는 두 가지 측면을 가집니다. 이는 그리스도와의 연합을 통해 그분의 죽음과 부활에 동참하는 것을 의미합니다(롬 6:4).</p>
                        <ul class="list-disc list-inside space-y-2 pl-4">
                            <li><strong>옛사람의 죽음 (Mortification):</strong> 죄에 대해 진심으로 슬퍼하고, 죄를 더욱 미워하며, 죄로부터 돌아서는 것입니다.</li>
                            <li><strong>새사람의 살아남 (Vivification):</strong> 그리스도 안에서 하나님을 기뻐하고, 모든 선한 일 가운데 하나님의 뜻에 따라 살기를 즐거워하는 것입니다.</li>
                        </ul>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">하나님의 법의 역할</h3>
                        <p>구원받은 신자에게 율법(십계명)은 더 이상 정죄의 도구가 아니라, 감사하는 삶의 지침이 됩니다. 율법은 우리에게 다음 세 가지 용도로 주어졌습니다.</p>
                        <ol class="list-decimal list-inside space-y-2 pl-4">
                            <li><strong>죄를 깨닫게 하는 용도(교사):</strong> 율법은 우리의 죄를 드러내어 그리스도께로 인도합니다.</li>
                            <li><strong>사회를 유지하는 용도(굴레):</strong> 율법은 사회의 악을 억제하는 역할을 합니다.</li>
                            <li><strong>삶의 규범이 되는 용도(지침):</strong> 율법은 구원받은 백성이 하나님을 기쁘시게 하는 삶이 무엇인지 알려주는 거룩한 삶의 규범입니다.</li>
                        </ol>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter7" class="infographic-card" style="border-color: #10b981;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #d1fae5;">
                    <svg style="color: #10b981;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 7장: 교회의 구별되는 표지</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>세상에는 수많은 교회가 있지만, 모든 교회가 참된 교회는 아닙니다. 종교개혁가들은 성경에 근거하여 참된 교회를 구별할 수 있는 세 가지 명확한 외부적 표지를 제시했습니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">참된 교회의 세 가지 표지 (Three Marks)</h3>
                        <div class="grid md:grid-cols-3 gap-4 mt-4">
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">1. 복음의 순전한 전파</h4>
                                <p>가장 근본적인 표지는 칭의의 복음이 순수하게 선포되는 것입니다. 율법과 복음을 올바로 구분하여, 인간의 행위가 아닌 오직 그리스도의 피와 의로 말미암는 구원을 가르쳐야 합니다. 다른 복음은 저주를 받을 것입니다(갈 1:8-9).</p>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">2. 성례의 순결한 시행</h4>
                                <p>그리스도께서 친히 제정하신 세례와 성찬, 두 가지 성례만을 인정하고, 인간적인 요소를 더하거나 빼지 않고 성경의 가르침대로 순결하게 시행해야 합니다. 성례는 말씀의 가시적인 형태로서 복음을 확증합니다.</p>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">3. 교회 권징의 신실한 실행</h4>
                                <p>권징은 성도들을 말씀으로 양육하고(긍정적 권징), 회개하지 않는 죄를 벌하여(부정적 권징) 교회의 거룩함을 지키고 죄인을 회복시키는 중요한 과정입니다. 권징이 없는 교회는 교회의 순결을 지킬 수 없습니다.</p>
                            </div>
                        </div>

                        <h3 class="text-lg font-semibold mt-6 mb-2">거짓 교회의 특징</h3>
                        <p>반면, 거짓 교회는 하나님의 말씀보다 자신과 그 규례에 더 많은 권위를 부여하고, 그리스도의 멍에에 복종하기를 거부하며, 성례를 임의로 변경하고, 사람을 그리스도보다 더 의지하며, 경건하게 살려는 성도들을 핍박하는 특징을 보입니다.</p>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter8" class="infographic-card" style="border-color: #f97316;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #ffedd5;">
                    <svg style="color: #f97316;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 8장: 예배 - 하나님께, 하나님에 의해, 하나님을 위해</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>우리는 하나님을 영화롭게 하고 영원토록 그를 즐거워하기 위해 존재합니다. 그 최고의 표현은 공적 예배입니다. 개혁주의 예배는 인간의 만족이나 유행이 아닌, 오직 하나님께서 자신의 말씀에서 명령하신 방식대로 드려져야 한다는 원리에 기초합니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">예배의 규정적 원리 (Regulative Principle of Worship)</h3>
                        <p>개혁주의 예배의 핵심 원리는 "하나님께서 명령하지 않으신 모든 것은 금지된다"는 것입니다. 이는 하나님께서 예배 받으실 방법을 스스로 정하셨으며, 인간이 고안한 어떤 방법도 그분의 예배를 더럽힐 수 있다는 믿음에 근거합니다.</p>
                        <blockquote>"하나님을 예배하는 합당한 방법은 그분 자신에 의해 제정되었고, 그 자신의 계시된 뜻에 의해 제한된다. 따라서 우리는 인간의 상상이나 고안, 혹은 사탄의 제안에 따라, 어떤 가시적 형상이나 성경에 규정되지 않은 다른 어떤 방식으로도 그분을 예배해서는 안 된다." (WCF 21.1)</blockquote>
                        <p>이 원리는 나답과 아비후가 '명령하시지 않은 다른 불'을 드리다가 죽임을 당한 사건(레 10:1-3)에서 그 엄중함을 확인할 수 있습니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">예배일의 변경: 안식일에서 주일로</h3>
                        <p>구약의 백성은 창조 사역의 완성을 기념하며 일곱째 날(토요일)을 안식일로 지켰습니다. 그러나 그리스도께서 첫째 날(일요일)에 부활하심으로써 낡은 질서를 끝내시고 새로운 창조를 시작하셨습니다. 따라서 신약 교회는 창조와 더불어 구속 사역의 완성을 기념하는 첫째 날, 즉 '주의 날'(계 1:10)에 예배합니다.</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">주일 성수의 의미</h3>
                        <p>주일은 단순히 '주님의 아침'이나 '주님의 한 시간'이 아니라, '주의 날' 전체입니다. 이날 우리는 세상의 일로부터 쉬고, 공예배에 부지런히 참석하여 말씀과 성례를 통해 은혜를 받으며, 영적인 안식을 누리도록 부름받았습니다. 이는 율법주의가 아니라, 다가올 영원한 안식의 예표로서 하나님께서 주신 복된 선물입니다.</p>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>

        <section id="chapter9" class="infographic-card" style="border-color: #6366f1;">
            <div class="p-6 sm:p-8 flex items-start gap-6">
                <div class="icon-bg" style="background-color: #e0e7ff;">
                    <svg style="color: #6366f1;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">제 9장: 설교와 성례 - 은혜의 방편</h2>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>하나님께서는 우리의 연약함을 아시고, 그분의 은혜를 우리에게 효과적으로 전달하기 위한 특별한 수단, 즉 '은혜의 방편(Means of Grace)'을 제정하셨습니다. 이것은 주로 말씀의 선포와 성례입니다.</p>

                        <h3 class="text-lg font-semibold mt-6 mb-2">복음 설교: 주된 은혜의 방편</h3>
                        <p>설교는 성령께서 믿음을 일으키시고(롬 10:17) 성도들을 견고하게 하시는 주된 수단입니다. 개혁주의 설교는 다음과 같은 특징을 가집니다.</p>
                        <ul class="list-disc list-inside space-y-2 pl-4">
                            <li><strong>그리스도 중심성:</strong> 성경의 모든 본문에서 그리스도를 선포합니다.</li>
                            <li><strong>율법과 복음의 구분:</strong> 율법을 통해 죄를 깨닫게 하여 겸손하게 만들고, 복음을 통해 신자를 위로하고 불신자에게 구원을 제공합니다.</li>
                            <li><strong>진실한 초청:</strong> 모든 사람에게 차별 없이 회개하고 믿으라는 복음의 약속을 진실하게 선포합니다.</li>
                        </ul>

                        <h3 class="text-lg font-semibold mt-6 mb-2">성례: 보이는 말씀</h3>
                        <p>성례는 눈에 보이는 말씀으로서, 설교된 복음을 우리의 감각에 더 분명하게 제시하고 믿음을 확증하는 '표와 인'입니다.</p>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">세례 (Baptism)</h4>
                                <p>세례는 언약 공동체로 들어가는 입문의 성례입니다. 이는 우리가 하나님의 교회에 소속되고 세상과 구별되었음을 나타냅니다. 세례는 단지 우리가 물로 씻는 순간뿐만 아니라 평생에 걸쳐 우리가 그리스도의 피와 성령으로 죄 씻음을 받았다는 사실을 상기시키며 믿음을 강하게 합니다.</p>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <h4 class="font-bold text-lg">성찬 (The Lord's Supper)</h4>
                                <p>성찬은 우리의 영혼을 양육하는 성례입니다. 떡과 포도주를 통해 우리는 믿음으로 그리스도의 몸과 피에 영적으로 참여하며, 그분의 죽음이 가져다준 모든 유익을 누립니다. 성찬에 참여할 때마다 우리는 그리스도의 대속을 기억하고, 그분과의 연합을 확증하며, 영적인 힘을 공급받습니다.</p>
                            </div>
                        </div>
                    </div>
                    <button class="ask-question-btn">이 장에 대해 질문하기</button>
                </div>
            </div>
        </section>
    </main>

    <div id="qa-modal" class="modal-overlay">
        <div class="modal-container">
            <header class="modal-header">
                <h2 id="modal-title" class="text-xl font-bold text-gray-800">질문하기</h2>
                <button id="close-modal-btn" class="text-gray-500 hover:text-gray-800 text-3xl font-light">&times;</button>
            </header>
            <main id="modal-body" class="modal-body">
                <div id="chat-window" class="flex flex-col h-full space-y-4">
                    </div>
            </main>
            <footer class="modal-footer">
                <form id="qa-form" class="flex items-center gap-2">
                    <input id="question-input" type="text" class="flex-grow p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="여기에 질문을 입력하세요..." autocomplete="off">
                    <button type="submit" class="bg-indigo-600 text-white p-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                        </svg>
                    </button>
                </form>
            </footer>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('qa-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const qaForm = document.getElementById('qa-form');
            const questionInput = document.getElementById('question-input');
            const chatWindow = document.getElementById('chat-window');
            const modalTitle = document.getElementById('modal-title');
            
            let currentChapterTitle = '';
            let currentChapterContext = '';

            document.querySelectorAll('.ask-question-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const card = e.target.closest('.infographic-card');
                    currentChapterTitle = card.querySelector('h2').innerText;
                    
                    const contentDiv = card.querySelector('div > div');
                    currentChapterContext = Array.from(contentDiv.children)
                        .map(el => el.innerText.trim())
                        .filter(text => text)
                        .join('\n\n');

                    modalTitle.textContent = `${currentChapterTitle}`;
                    chatWindow.innerHTML = `
                        <div class="chat-bubble ai-bubble">
                            안녕하세요! <strong>${currentChapterTitle}</strong>에 대해 무엇이든 물어보세요.
                        </div>
                    `;
                    openModal();
                });
            });

            function openModal() {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                setTimeout(() => questionInput.focus(), 300);
            }

            function closeModal() {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            qaForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const userQuestion = questionInput.value.trim();
                if (!userQuestion) return;

                appendMessage(userQuestion, 'user');
                questionInput.value = '';
                showTypingIndicator();

                const finalPrompt = `
                    당신은 [콘텐츠 주제]에 대해 설명하는 전문 AI 어시스턴트입니다. 아래에 명시된 두 가지 규칙의 우선순위를 반드시 지켜서 사용자의 질문에 답변해 주세요.

                    [규칙 1: 주어진 자료 우선의 원칙]
                    - 최우선적으로, 아래에 제공되는 "[강의 노트 내용]"에 근거하여 답변을 생성해야 합니다.
                    - 자료에 명시된 사실과 논리를 바탕으로 질문에 직접적으로 그리고 자연스럽게 답해주세요.

                    [규칙 2: 지식 확장 및 보충의 원칙]
                    - 만약 "[강의 노트 내용]"만으로 답변하기에 정보가 불충분하거나 관련 내용이 없을 경우에는, 당신의 전통적 개혁신학의 전문 지식을 활용하여 답변을 보충할 수 있습니다.(반드시 전통 개혁신학에 근거해야 합니다.)
                    - 이 경우, 보충된 내용이 원래 자료에 없었음을 명확히 하기 위해 "보충 설명을 드리자면..." 과 같이 서술을 시작해주세요.

                    ---
                    [강의 노트 제목]: ${currentChapterTitle}
                    ---
                    [강의 노트 내용]:
                    ${currentChapterContext}
                    ---
                    [사용자 질문]:
                    ${userQuestion}
                `;

                try {
                    const response = await fetch('/api/ask-gemini', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: finalPrompt })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    // Safe navigation to extract text
                    const aiResponse = data?.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (aiResponse === undefined) {
                        throw new Error("Invalid response structure from API. Text part is missing.");
                    }
                    
                    removeTypingIndicator();
                    appendMessage(aiResponse, 'ai');

                } catch (error) {
                    console.error('Error fetching AI response:', error);
                    removeTypingIndicator();
                    appendMessage('죄송합니다. 답변을 가져오는 중 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.', 'ai');
                }
            });

            function appendMessage(text, sender) {
                const messageDiv = document.createElement('div');
                const bubbleClass = sender === 'user' ? 'user-bubble' : 'ai-bubble';
                messageDiv.className = `chat-bubble ${bubbleClass} flex flex-col`;
                
                // Simple markdown to HTML conversion
                let htmlText = text
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"g, "&quot;")
                    .replace(/'/g, "&#039;");
                
                htmlText = htmlText
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\n/g, '<br>');

                messageDiv.innerHTML = htmlText;
                chatWindow.appendChild(messageDiv);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }
            
            function showTyping